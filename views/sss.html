<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h1>SSS</h1>
  Admin
  <button onclick="login()">login</button>
  <br>
  <br>
  <br>
  <br>
  Tag
  <button onclick="tagAdd()">Add</button>
  <button onclick="tagList()">List</button>
  <button onclick="tagEdit()">Edit</button>
  <br>
  <br>
  <br>
  <br>
  Banner
  <button onclick="BannerAdd()">Add</button>
  <button onclick="BannerList()">List</button>
  <button onclick="BannerEdit()">Edit</button>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.4/axios.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/image-to-base64@2.2.0/browser.min.js"></script>

  <script>
    let token = "22ed499e-62e4-4143-a05a-4fdacc330d89"

    function login() {
      const data = {
        account: 'alex2223',
        password: 'alex2223'
      }
      const obj = CryptoJS.AES.encrypt(JSON.stringify(data), 'C8763').toString()
      let de = CryptoJS.AES.decrypt(obj, "C8763")
      console.log(obj)
      axios
        .post('http://localhost:3300/api/admin/login', {
          data: obj
        })
        .then(res => {
          const ans = JSON.parse(CryptoJS.AES.decrypt(res.data.data, "C8763").toString(CryptoJS.enc.Utf8))
          console.log(ans)
          token = ans.token
        })
        .catch(e => {
          console.log(e);
        });
    }

    function BannerAdd() {
      const data = {
        token,
        tokenReq: "alex9527",
        title: 'DBWS新發售',
        subtitle: '新潮廚師 VS 神奇牌組',
        date: '2023/03/31 12:00:00',
        photo_pc: '',
        photo_mobile: '',
        url: ''
      }
      const obj = CryptoJS.AES.encrypt(JSON.stringify(data), 'C8763').toString()
      axios.post('http://localhost:3300/api/banner/add', {
        data: obj
      }).then(res => {
        const ans = JSON.parse(CryptoJS.AES.decrypt(res.data.data, "C8763").toString(CryptoJS.enc.Utf8))
        console.log(ans, res.data.error_code)
      })
    }

    function BannerEdit() {
      const data = {
        token,
        tokenReq: "alex9527",
        title: 'DBWS新發售',
        subtitle: '新潮廚師 VS 神奇牌組 超絕強化',
        date: '2023/03/31 13:00:00',
        photo_pc: '',
        photo_mobile: '',
        url: '',
        _id: '6433d792b79b733551223b6e'
      }
      const obj = CryptoJS.AES.encrypt(JSON.stringify(data), 'C8763').toString()
      axios.post('http://localhost:3300/api/banner/edit', {
        data: obj
      }).then(res => {
        const ans = JSON.parse(CryptoJS.AES.decrypt(res.data.data, "C8763").toString(CryptoJS.enc.Utf8))
        console.log(ans, res.data.error_code)
      })
    }

    function BannerList() {
      const data = {
        token,
        tokenReq: "alex9527",
        page: 0,
        limit: 3,
        filter: {
          begin_date: '2023-03-22',
          end_date: '2023-04-12'
        }
      }
      const obj = CryptoJS.AES.encrypt(JSON.stringify(data), 'C8763').toString()
      axios.post('http://localhost:3300/api/banner/list', {
        data: obj
      }).then(res => {
        const ans = JSON.parse(CryptoJS.AES.decrypt(res.data.data, "C8763").toString(CryptoJS.enc.Utf8))
        console.log(ans, res.data.error_code)
      })
    }

    function tagAdd() {
      const data = {
        token,
        tokenReq: "alex9527",
        tag: '超量魔法'

      }
      const obj = CryptoJS.AES.encrypt(JSON.stringify(data), 'C8763').toString()
      axios.post('http://localhost:3300/api/tag/add', {
        data: obj
      }).then(res => {
        const ans = JSON.parse(CryptoJS.AES.decrypt(res.data.data, "C8763").toString(CryptoJS.enc.Utf8))
        console.log(ans, res.data.error_code)
      })
    }

    function tagList() {
      const data = {
        token,
        tokenReq: "alex9527",
        page: 1,
        limit: 2,
        filter: {
          tag: '超量'
        }
      }
      const obj = CryptoJS.AES.encrypt(JSON.stringify(data), 'C8763').toString()
      axios.post('http://localhost:3300/api/tag/list', {
        data: obj
      }).then(res => {
        const ans = JSON.parse(CryptoJS.AES.decrypt(res.data.data, "C8763").toString(CryptoJS.enc.Utf8))
        console.log(ans, res.data.error_code)
      })
    }

    function tagEdit() {
      const data = {
        token,
        tokenReq: "alex9527",
        tag: '同步魔法改',
        _id: '6433cbb4393872bd1b6ee64c'
      }
      const obj = CryptoJS.AES.encrypt(JSON.stringify(data), 'C8763').toString()
      axios.post('http://localhost:3300/api/tag/edit', {
        data: obj
      }).then(res => {
        const ans = JSON.parse(CryptoJS.AES.decrypt(res.data.data, "C8763").toString(CryptoJS.enc.Utf8))
        console.log(ans, res.data.error_code)
      })
    }
  </script>
</body>

</html>